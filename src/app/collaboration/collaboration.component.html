<!-- MAIN CONTENT -->
<div class="container py-5">
  <h2>List Of Collaborations</h2>

  <div class="collab-animation" *ngIf="showAnimation">
  
  </div>
  <!-- FORM -->
  <div class="card shadow-sm rounded-4 mb-5">
    <div class="card-header bg-secondary text-white">
      <h5 class="m-0">Create New Collaboration</h5>
    </div>
    <div class="card-body">
      <form [formGroup]="myForm" (ngSubmit)="addCollab()">
        <div class="mb-3">
          <label for="title" class="form-label">Chat Title</label>
          <input
            type="text"
            id="title"
            class="form-control"
            formControlName="title"
            required
          />
        </div>
        <div class="mb-3">
          <mat-form-field appearance="fill" class="w-100">
            <mat-label>Membres</mat-label>
            <mat-select
              formControlName="userIds"
              multiple
            >
              <mat-option
                *ngFor="let membre of membres$ | async"
                [value]="membre.id"
              >
                {{ membre.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <button type="submit" class="btn btn-primary w-100 rounded-pill">
          <i class="bi bi-plus-circle me-1"></i> Create Collaboration
        </button>
      </form>
    </div>
  </div>

  <!-- LIST OF COLLABORATIONS -->
  <div class="card shadow-sm rounded-4">
    <div class="card-header bg-info text-white">
      <h5 class="m-0">Collaboration List</h5>
    </div>
    <div class="card-body">
      <ul class="list-group list-group-flush" *ngIf="(collaborations$ | async)?.length > 0; else noCollab">
        <div class="list-group-item d-flex justify-content-between align-items-start" *ngFor="let collab of collaborations$ | async">
          <div class="ms-2 me-auto">
            <div class="fw-bold"><h5 (click)="getCollabById(collab.id!)" style="  cursor: pointer;">{{ collab.title }}</h5></div>
          </div>
          <button (click)="deleteCollaboration(collab.id)" class="btn btn-outline-danger btn-sm rounded-pill">
            <i class="bi bi-trash3-fill"></i>
          </button>
        </div>
      </ul>
    
      <ng-template #noCollab>
        <div class="alert alert-warning text-center m-0" role="alert">
          <i class="bi bi-exclamation-circle-fill me-2"></i> No collaborations available.
        </div>
      </ng-template>
    </div>
  </div>
</div>
